<Window x:Class="PersonalLibrary.UI.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PersonalLibrary.UI"
        mc:Ignorable="d"
        Title="The Book Nook" Height="700" Width="700"
        Background="{StaticResource BackgroundBrush}">

    <Window.Resources>
            <CollectionViewSource x:Key="ReadingStatusesView" 
            Source="{Binding ReadingStatuses}"/>
        </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->

        <StackPanel Grid.Row="0" Orientation="Vertical" Margin="0,0,0,8">
           <TextBlock Text="The Book Nook" FontSize="24" FontWeight="SemiBold"/>
        </StackPanel>

        <!-- Add Book Button -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="8,0,0,8">
            <Button Content="Add Book" Width="100" Height="30" Command="{Binding AddBookCommand}"/>
        </StackPanel>


        <!-- DataGrid Card -->

        <Border Grid.Row="2" Background="{StaticResource SurfaceBrush}" CornerRadius="10" Padding="12" BorderBrush="{StaticResource DividerBrush}" BorderThickness="1">

            <DataGrid x:Name="BooksDataGrid"
                ItemsSource="{Binding Books}"
                AutoGenerateColumns="False"
                CanUserAddRows="False"
                HeadersVisibility="Column"
                GridLinesVisibility="None"
                CellEditEnding="BooksDataGrid_CellEditEnding"
                MouseDoubleClick="BooksDataGrid_MouseDoubleClick"
                SelectionMode="Single"
                SelectionUnit="FullRow"
                RowHeight="32"
                FontSize="12">

                <DataGrid.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Edit Book" Click="EditBook_Click"/>
                        <MenuItem Header="Delete Book" Click="DeleteBook_Click"/>
                    </ContextMenu>
                </DataGrid.ContextMenu>

                <DataGrid.Columns>
                    <DataGridTextColumn Header="Title" Binding="{Binding Title}" Width="*" IsReadOnly="True"/>
                    <DataGridTextColumn Header="Author" Binding="{Binding Author}" Width="120" IsReadOnly="True"/>
                    <DataGridComboBoxColumn Header="Status"
                        SelectedValueBinding="{Binding BookReading.ReadingStatusId, Mode=TwoWay}"
                        SelectedValuePath="ReadingStatusId"
                        DisplayMemberPath="Name"
                        Width="Auto"
                        IsReadOnly="False"
                        ItemsSource="{Binding Source={StaticResource ReadingStatusesView}}"/>
                    <DataGridTextColumn Header="Started"
                        Binding="{Binding BookReading.DateStarted, StringFormat=d}"
                        Width="80"
                        IsReadOnly="True"/>
                    <DataGridTextColumn Header="Finished"
                        Binding="{Binding BookReading.DateFinished, StringFormat=d}"
                        Width="80"
                        IsReadOnly="True"/>
                    <DataGridTextColumn Header="Rating" Binding="{Binding BookReading.RatingStars}" Width="100" IsReadOnly="True" x:Name="RatingColumn"/>
                </DataGrid.Columns>
            </DataGrid>

        </Border>   
    </Grid>
</Window>
